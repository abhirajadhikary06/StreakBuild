{% extends 'tracker/base.html' %}
{% load custom_filters %}

{% block content %}
<h1>Dashboard</h1>

<!-- Uploaded Files -->
<h2>Uploaded Files</h2>
{% if uploads %}
    <div>
        {% for upload in uploads %}
            <div style="margin-bottom: 20px;">
                <!-- Display file name and a download link -->
                <p><strong>File:</strong> <a href="{{ upload.file.url }}" target="_blank">{{ upload.file.name }}</a></p>
                <p><strong>Challenge:</strong> {{ upload.challenge.name }}</p>
                <!-- Delete button -->
                <form method="POST" action="{% url 'delete_file' upload.id %}" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" onclick="return confirm('Are you sure you want to delete this file?')">Delete</button>
                </form>
            </div>
        {% endfor %}
    </div>
{% else %}
    <p>No files uploaded yet.</p>
{% endif %}

<!-- Link to upload a new file -->
<a href="{% url 'upload_file' %}">Upload File</a>

<!-- Notifications Dropdown -->
<script>
    function toggleNotifications() {
        const dropdown = document.getElementById('notifications-dropdown');
        dropdown.style.display = dropdown.style.display === 'none' ? 'block' : 'none';
    }
</script>
{% endblock %}